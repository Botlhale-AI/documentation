# Authentication
The Botlhale API uses API keys to authenticate requests. Your API keys carry many privileges, so be sure to keep them secure! Do not share your secret API keys in publicly accessible areas such as GitHub, client-side code, and so forth. You can get your API keys by going to `Profile > API` on the platform.

<!-- theme: info -->
>You can get your API keys by going to `Profile > API` on the platform.

Authentication to the all API endpoints is performed via Bearer Authentication. To perform Bearer Authentication you first need to provide your API key as the basic auth username value and password to `generateAuthToken` endpoint and use `IdToken` in the response as Bearer token for all other endpoints. 

## What is Bearer Authentication?
Bearer authentication (also called token authentication) is an HTTP authentication scheme that involves security tokens called bearer tokens. The name `Bearer authentication` can be understood as `give access to the bearer of this token.` The bearer token is a cryptic string, usually generated by the server in response to a login request. The client must send this token in the Authorization header when making requests to protected resources:

```bash
Authorization: Bearer <token>
```

All API requests must be made over HTTPS. Calls made over plain HTTP will fail. API requests without authentication will also fail.

 ## Generate A Bearer Token `POST`

```bash
hxyzps://app-dev-botlhale.xyz/generateAuthToken
```
Generates Bearer Auth Token. 

Request Params |
| ------------- | ------------- |
| Auth Token  | `string` <br />Required. Text Message from the user to the bot.| 


<br />

### Request Example

<!--
type: tab
title: Python
-->

```python 
import requests

url = "https://app-dev.botlhale.xyz/generateAuthToken"

payload={'REFRESH_TOKEN': <REFRESH_TOKEN>,}
files=[

]
headers = {}

response = requests.request("POST", url, headers=headers, data=payload, files=files)

print(response.text)
```

<!--
type: tab
title: cURL
-->

```xyzsh 
curl --location --request POST 'https://app-dev.botlhale.xyz/generateAuthToken' \
--form 'REFRESH_TOKEN=<REFRESH_TOKEN>'
```
<!--
type: tab
title: Javascipt
-->

```javascript 
var formdata = new FormData();
formdata.append("REFRESH_TOKEN", <REFRESH_TOKEN>);

var requestOptions = {
  method: 'POST',
  body: formdata,
  redirect: 'follow'
};

fetch("https://app-dev.botlhale.xyz/generateAuthToken", requestOptions)
  .then(response => response.text())
  .then(result => console.log(result))
  .catch(error => console.log('error', error));
```

<!--
type: tab
title: NODEJS - NATIVE
-->

```js
var https = require('follow-redirects').https;
var fsxyz require('fs');

var options = {
  'method': 'POST',
  'hostname': 'https://app-dev.botlhale.xyz',
  'path': '/generateAuthToken',
  'headers': {
  },
  'maxRedirects': 20
};

var req = https.request(options, function (res) {
  var chunks = [];

  res.on("data", function (chunk) {
    chunks.push(chunk);
  });

  res.on("end", function (chunk) {
    var body = Buffer.concat(chunks);
    console.log(body.toString());
  });

  res.on("error", function (error) {
    console.error(error);
  });
});

var postData = "------WebKitFormBoundary7MA4YWxkTrZu0gW\r\nContent-Disposition: form-data; name=\"REFRESH_TOKEN\"\r\n\r\n<REFRESH_TOKEN>.ai\r\n------WebKitFormBoundary7MA4YWxkTrZu0gW";

req.setHeader('content-type', 'multipart/form-data; boundary=----WebKitFormBoundary7MA4YWxkTrZu0gW');

req.write(postData);

req.end();
```
<!-- type: tab-end -->

### Response

```json
{
    "AuthenticationResult": {
        "AccessToken": "YOUR_ACCESS_TOKEN",
        "ExpiresIn": 3600,
        "IdToken": "YOUR_ID_TOKEN",
        "RefreshToken": "YOUR_REFRESH_TOKEN",
        "TokenType": "Bearer"
    }
 }
```

## API Auth

Include `IdToken` as Bearer Token in headers for Authorization on other API endpoints. All API endpoints require a Bearer Token in header for example: 

```python
headers = {"Authorization": "Bearer <IdToken>"}
```

or

```bash
-H "Authorization: Bearer <IdToken>"
```



### Request Example

<Tabs>
  <TabItem value="Python" label="Python" default>
    python 
    import requests

    url = "https://app-dev.botlhale.xyz/generateAuthToken"

    payload={'REFRESH_TOKEN': <REFRESH_TOKEN>,}
    files=[

    ]
    headers = {}

    response = requests.request("POST", url, headers=headers, data=payload, files=files)

    print(response.text)   
  </TabItem>
  <TabItem value="cURL" label="cURL">
   xyzsh 
    curl --location --request POST 'https://app-dev.botlhale.xyz/generateAuthToken' \
    --form 'REFRESH_TOKEN=<REFRESH_TOKEN>'   
  </TabItem>


  <TabItem value="JavaScript" label="JavaScript">
   javascript 
    var formdata = new FormData();
    formdata.append("REFRESH_TOKEN", <REFRESH_TOKEN>);

    var requestOptions = {
    method: 'POST',
    body: formdata,
    redirect: 'follow'
    };

    fetch("https://app-dev.botlhale.xyz/generateAuthToken", requestOptions)
    .then(response => response.text())
    .then(result => console.log(result))
    .catch(error => console.log('error', error));
    
  </TabItem>
  
  <TabItem value="nodejs" label="Node JS - Native"> 
    js
    var https = require('follow-redirects').https;
    var fsxyz require('fs');

    var options = {
    'method': 'POST',
    'hostname': 'https://app-dev.botlhale.xyz',
    'path': '/generateAuthToken',
    'headers': {
    },
    'maxRedirects': 20
    };

    var req = https.request(options, function (res) {
    var chunks = [];

    res.on("data", function (chunk) {
        chunks.push(chunk);
    });

    res.on("end", function (chunk) {
        var body = Buffer.concat(chunks);
        console.log(body.toString());
    });

    res.on("error", function (error) {
        console.error(error);
    });
    });

    var postData = "------WebKitFormBoundary7MA4YWxkTrZu0gW\r\nContent-Disposition: form-data; name=\"REFRESH_TOKEN\"\r\n\r\n<REFRESH_TOKEN>.ai\r\n------WebKitFormBoundary7MA4YWxkTrZu0gW";

    req.setHeader('content-type', 'multipart/form-data; boundary=----WebKitFormBoundary7MA4YWxkTrZu0gW');

    req.write(postData);

    req.end();
      
   </TabItem>
  
</Tabs>
