"use strict";(self.webpackChunkdocumentation=self.webpackChunkdocumentation||[]).push([[4800],{3905:function(e,t,n){n.d(t,{Zo:function(){return p},kt:function(){return m}});var a=n(7294);function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function o(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function s(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?o(Object(n),!0).forEach((function(t){r(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function i(e,t){if(null==e)return{};var n,a,r=function(e,t){if(null==e)return{};var n,a,r={},o=Object.keys(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}var l=a.createContext({}),u=function(e){var t=a.useContext(l),n=t;return e&&(n="function"==typeof e?e(t):s(s({},t),e)),n},p=function(e){var t=u(e.components);return a.createElement(l.Provider,{value:t},e.children)},c={inlineCode:"code",wrapper:function(e){var t=e.children;return a.createElement(a.Fragment,{},t)}},d=a.forwardRef((function(e,t){var n=e.components,r=e.mdxType,o=e.originalType,l=e.parentName,p=i(e,["components","mdxType","originalType","parentName"]),d=u(n),m=r,h=d["".concat(l,".").concat(m)]||d[m]||c[m]||o;return n?a.createElement(h,s(s({ref:t},p),{},{components:n})):a.createElement(h,s({ref:t},p))}));function m(e,t){var n=arguments,r=t&&t.mdxType;if("string"==typeof e||r){var o=n.length,s=new Array(o);s[0]=d;var i={};for(var l in t)hasOwnProperty.call(t,l)&&(i[l]=t[l]);i.originalType=e,i.mdxType="string"==typeof e?e:r,s[1]=i;for(var u=2;u<o;u++)s[u]=n[u];return a.createElement.apply(null,s)}return a.createElement.apply(null,n)}d.displayName="MDXCreateElement"},8215:function(e,t,n){var a=n(7294);t.Z=function(e){var t=e.children,n=e.hidden,r=e.className;return a.createElement("div",{role:"tabpanel",hidden:n,className:r},t)}},5064:function(e,t,n){n.d(t,{Z:function(){return u}});var a=n(7294),r=n(9443);var o=function(){var e=(0,a.useContext)(r.Z);if(null==e)throw new Error('"useUserPreferencesContext" is used outside of "Layout" component.');return e},s=n(6010),i="tabItem_vU9c",l="tabItemActive_cw6a";var u=function(e){var t,n=e.lazy,r=e.block,u=e.defaultValue,p=e.values,c=e.groupId,d=e.className,m=a.Children.toArray(e.children),h=null!=p?p:m.map((function(e){return{value:e.props.value,label:e.props.label}})),f=null!=u?u:null==(t=m.find((function(e){return e.props.default})))?void 0:t.props.value,g=o(),k=g.tabGroupChoices,y=g.setTabGroupChoices,b=(0,a.useState)(f),v=b[0],T=b[1],A=[];if(null!=c){var S=k[c];null!=S&&S!==v&&h.some((function(e){return e.value===S}))&&T(S)}var N=function(e){var t=e.currentTarget,n=A.indexOf(t),a=h[n].value;T(a),null!=c&&(y(c,a),setTimeout((function(){var e,n,a,r,o,s,i,u;(e=t.getBoundingClientRect(),n=e.top,a=e.left,r=e.bottom,o=e.right,s=window,i=s.innerHeight,u=s.innerWidth,n>=0&&o<=u&&r<=i&&a>=0)||(t.scrollIntoView({block:"center",behavior:"smooth"}),t.classList.add(l),setTimeout((function(){return t.classList.remove(l)}),2e3))}),150))},P=function(e){var t,n=null;switch(e.key){case"ArrowRight":var a=A.indexOf(e.target)+1;n=A[a]||A[0];break;case"ArrowLeft":var r=A.indexOf(e.target)-1;n=A[r]||A[A.length-1]}null==(t=n)||t.focus()};return a.createElement("div",{className:"tabs-container"},a.createElement("ul",{role:"tablist","aria-orientation":"horizontal",className:(0,s.Z)("tabs",{"tabs--block":r},d)},h.map((function(e){var t=e.value,n=e.label;return a.createElement("li",{role:"tab",tabIndex:v===t?0:-1,"aria-selected":v===t,className:(0,s.Z)("tabs__item",i,{"tabs__item--active":v===t}),key:t,ref:function(e){return A.push(e)},onKeyDown:P,onFocus:N,onClick:N},null!=n?n:t)}))),n?(0,a.cloneElement)(m.filter((function(e){return e.props.value===v}))[0],{className:"margin-vert--md"}):a.createElement("div",{className:"margin-vert--md"},m.map((function(e,t){return(0,a.cloneElement)(e,{key:t,hidden:e.props.value!==v})}))))}},9443:function(e,t,n){var a=(0,n(7294).createContext)(void 0);t.Z=a},1651:function(e,t,n){n.r(t),n.d(t,{contentTitle:function(){return p},default:function(){return h},frontMatter:function(){return u},metadata:function(){return c},toc:function(){return d}});var a=n(7462),r=n(3366),o=(n(7294),n(3905)),s=n(5064),i=n(8215),l=["components"],u={},p="Speech to Text API Async",c={unversionedId:"APIs/Rest APIs/Speech APIs/Automatic Speech Recogniton/long ASR",id:"APIs/Rest APIs/Speech APIs/Automatic Speech Recogniton/long ASR",isDocsHomePage:!1,title:"Speech to Text API Async",description:"An asynchronous Speech to Text API recognition request requires you to first upload the file to our server for the asyncromous prosess to start. The asynchronous request will initiate a asynchronous Operation  and return this operation immediately. You can use asynchronous speech recognition with audio of any length up to 400 minutes.",source:"@site/docs/1 - APIs/Rest APIs/Speech APIs/Automatic Speech Recogniton/1 - long ASR.md",sourceDirName:"1 - APIs/Rest APIs/Speech APIs/Automatic Speech Recogniton",slug:"/APIs/Rest APIs/Speech APIs/Automatic Speech Recogniton/long ASR",permalink:"/docs/APIs/Rest APIs/Speech APIs/Automatic Speech Recogniton/long ASR",editUrl:"https://botlhale-ai.github.io/documentation/docs/1 - APIs/Rest APIs/Speech APIs/Automatic Speech Recogniton/1 - long ASR.md",tags:[],version:"current",sidebarPosition:1,frontMatter:{},sidebar:"tutorialSidebar",previous:{title:"Speech to Text API",permalink:"/docs/APIs/Rest APIs/Speech APIs/Automatic Speech Recogniton/ASR"},next:{title:"Platform Tutorials",permalink:"/docs/Tutorials/Platform Tutorials"}},d=[{value:"ASR Async <code>POST</code>",id:"asr-async-post",children:[]}],m={toc:d};function h(e){var t=e.components,n=(0,r.Z)(e,l);return(0,o.kt)("wrapper",(0,a.Z)({},m,n,{components:t,mdxType:"MDXLayout"}),(0,o.kt)("h1",{id:"speech-to-text-api-async"},"Speech to Text API Async"),(0,o.kt)("p",null,"An asynchronous Speech to Text API recognition request requires you to first upload the file to our server for the asyncromous prosess to start. The asynchronous request will initiate a asynchronous Operation  and return this operation immediately. You can use asynchronous speech recognition with audio of any length up to 400 minutes."),(0,o.kt)("h2",{id:"asr-async-post"},"ASR Async ",(0,o.kt)("inlineCode",{parentName:"h2"},"POST")),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-bash"},"https://api.botlhale.xyz/asr/upload\n")),(0,o.kt)("p",null,"This endpoint generates a presigned url that allows the user to upload a speech file for the async ASR. This endpoint returns a presigned url and the auto generated filename."),(0,o.kt)("table",null,(0,o.kt)("thead",{parentName:"table"},(0,o.kt)("tr",{parentName:"thead"},(0,o.kt)("th",{parentName:"tr",align:null},"Request Params"),(0,o.kt)("th",{parentName:"tr",align:null}))),(0,o.kt)("tbody",{parentName:"table"},(0,o.kt)("tr",{parentName:"tbody"},(0,o.kt)("td",{parentName:"tr",align:null},"SampleRate"),(0,o.kt)("td",{parentName:"tr",align:null},(0,o.kt)("inlineCode",{parentName:"td"},"Number")," ",(0,o.kt)("strong",{parentName:"td"},"Required.")," The sample rate of the supplied audio clip in hertz e.g 8000 for 8kHz")),(0,o.kt)("tr",{parentName:"tbody"},(0,o.kt)("td",{parentName:"tr",align:null},"LanguageCode"),(0,o.kt)("td",{parentName:"tr",align:null},(0,o.kt)("inlineCode",{parentName:"td"},"String")," ",(0,o.kt)("strong",{parentName:"td"},"Required.")," This is the language spoken in the supplied audio clip. We use BCP-47 language tags. See ",(0,o.kt)("a",{parentName:"td",href:"/docs/APIs/Rest%20APIs/Languages"},"list of supported languages")," for supported languages and codes.")),(0,o.kt)("tr",{parentName:"tbody"},(0,o.kt)("td",{parentName:"tr",align:null},"Diarization"),(0,o.kt)("td",{parentName:"tr",align:null},(0,o.kt)("inlineCode",{parentName:"td"},"Boolean"),"  ",(0,o.kt)("strong",{parentName:"td"},"Optional.")," Speaker diarization is used to identify different speakers in the clip as well as when the different speakers are speaking  ",(0,o.kt)("em",{parentName:"td"}," ",(0,o.kt)("strong",{parentName:"em"},"False")," - Default, Speaker diarization is enabled.  ")," ",(0,o.kt)("strong",{parentName:"td"},"True")," - Speaker diarization is enabled. ",(0,o.kt)("inlineCode",{parentName:"td"},"Note! This will have an impact on the cost of the request"))),(0,o.kt)("tr",{parentName:"tbody"},(0,o.kt)("td",{parentName:"tr",align:null},"LanguageID"),(0,o.kt)("td",{parentName:"tr",align:null},(0,o.kt)("inlineCode",{parentName:"td"},"Boolean")," ",(0,o.kt)("strong",{parentName:"td"},"Optional.")," This is used to automatically detect the language spoken on the audio clip. This is done at sentence level. When this is enabled, the provided LanguageCode will be ignored.",(0,o.kt)("em",{parentName:"td"}," ",(0,o.kt)("strong",{parentName:"em"},"False")," - Default, Language identification is enabled. ")," ",(0,o.kt)("strong",{parentName:"td"},"True")," - Language identification is enabled. ",(0,o.kt)("inlineCode",{parentName:"td"},"Note! This will have an impact on the cost of the request"))))),(0,o.kt)("br",null),(0,o.kt)("div",{className:"admonition admonition-info alert alert--info"},(0,o.kt)("div",{parentName:"div",className:"admonition-heading"},(0,o.kt)("h5",{parentName:"div"},(0,o.kt)("span",{parentName:"h5",className:"admonition-icon"},(0,o.kt)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"14",height:"16",viewBox:"0 0 14 16"},(0,o.kt)("path",{parentName:"svg",fillRule:"evenodd",d:"M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"}))),"info")),(0,o.kt)("div",{parentName:"div",className:"admonition-content"},(0,o.kt)("p",{parentName:"div"},"You need to Include ",(0,o.kt)("inlineCode",{parentName:"p"},"Authentication Token")," in request headers. See how to\n",(0,o.kt)("a",{parentName:"p",href:"/docs/APIs/Authentication#generate-a-bearer-token-post"},"Generate Auth Token"),"\ncodes."))),(0,o.kt)("br",null),(0,o.kt)("h4",{id:"request-example"},"Request Example"),(0,o.kt)(s.Z,{mdxType:"Tabs"},(0,o.kt)(i.Z,{value:"py",label:"Python",default:!0,mdxType:"TabItem"},(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-py"},"import requests\n\nurl = \"https://api.botlhale.xyz/asr/upload\"\n\npayload={\n  'LanguageCode': 'zu-ZA',\n  'SampleRate': '16000', \n  'Diarization': True, \n  'LanguageID': True\n  }\n\nfiles=[\n\n]\n\nheaders = {\n  'Authorization': 'Bearer <IdToken>'\n}\n\nresponse = requests.request(\"POST\", url, headers=headers, data=payload, files=files)\n\nprint(response.json())\n"))),(0,o.kt)(i.Z,{value:"bash",label:"Bash",mdxType:"TabItem"},(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-js"},"curl --location --request POST 'https://api.botlhale.xyz/asr' \\\n--header 'Authorization: Bearer <IdToken>' \\\n--form 'SpeechFile=@\"mPMBv3Y3c/bot_YPBDDDGASKSEVTHT__V5v5DS992s.wav\"' \\\n--form 'LanguageCode=\"zu-ZA\"'\\\n--form 'SampleRate=\"16000\"'\n"))),(0,o.kt)(i.Z,{value:"js",label:"JavaScript",mdxType:"TabItem"},(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-js"},'var myHeaders = new Headers();\nmyHeaders.append("Authorization", "Bearer <IdToken>");\n\nvar formdata = new FormData();\nformdata.append("SpeechFile", fileInput.files[0], "[PROXY]");\nformdata.append("LanguageCode", "zu-ZA");\nformdata.append("SampleRate", "16000");\n\nvar requestOptions = {\n  method: \'POST\',\n  headers: myHeaders,\n  body: formdata,\n  redirect: \'follow\'\n};\n\nfetch("https://api.botlhale.xyz/asr", requestOptions)\n  .then(response => response.text())\n  .then(result => console.log(result))\n  .catch(error => console.log(\'error\', error));\n'))),(0,o.kt)(i.Z,{value:"nodejs",label:"Node JS - Native",mdxType:"TabItem"},(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-js"},"var https = require('follow-redirects').https;\nvar fs = require('fs');\n\nvar options = {\n  'method': 'POST',\n  'hostname': 'https://api.botlhale.xyz',\n  'path': '/asr',\n  'headers': {\n    'Authorization': 'Bearer <IdToken>'\n  },\n  'maxRedirects': 20\n};\n\nvar req = https.request(options, function (res) {\n  var chunks = [];\n\n  res.on(\"data\", function (chunk) {\n    chunks.push(chunk);\n  });\n\n  res.on(\"end\", function (chunk) {\n    var body = Buffer.concat(chunks);\n    console.log(body.toString());\n  });\n\n  res.on(\"error\", function (error) {\n    console.error(error);\n  });\n});\n\nvar postData = \"------WebKitFormBoundary7MA4YWxkTrZu0gW\\r\\nContent-Disposition: form-data; name=\\\"LanguageCode\\\"\\r\\n\\r\\nzu-ZA\\r\\n------WebKitFormBoundary7MA4YWxkTrZu0gW\\r\\nContent-Disposition: form-data; name=\\\"SpeechFile\\\"; filename=\\\"[PROXY]\\\"\\r\\nContent-Type: \\\"{Insert_File_Content_Type}\\\"\\r\\n\\r\\n\" + fs.readFileSync('VPIoG_uMJ/bot_YPBDDDGASKSEVTHT__V5v5DS992s.wav') + \"\\r\\n------WebKitFormBoundary7MA4YWxkTrZu0gW\\r\\nContent-Disposition: form-data; name=\\\"SampleRate\\\"\\r\\n\\r\\n16000\\r\\n------WebKitFormBoundary7MA4YWxkTrZu0gW--\";\n\nreq.setHeader('content-type', 'multipart/form-data; boundary=----WebKitFormBoundary7MA4YWxkTrZu0gW');\n\nreq.write(postData);\n\nreq.end();\n")))),(0,o.kt)("h4",{id:"response-body"},"Response body"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-json"},'{\n  "fields": \n  {\n    "AWSAccessKeyId": "<>", \n    "key": "asr_a7ki4qpZ0635_zu-ZA_16000_19y3NDgP76m4.wav", \n    "policy": "<>", \n    "signature": "<>", \n    "x-amz-security-token": "<>"\n    }, \n  "url": "https://botlhale-api-asr-async.s3.amazonaws.com/"\n  }\n')),(0,o.kt)("br",null),(0,o.kt)("p",null,"The generated presigned URL includes both a URL and additional fields that must be passed as part of the subsequent HTTP POST request. The following code demonstrates how to use the requests package with a presigned POST URL to perform a POST request to upload a file."),(0,o.kt)("br",null),(0,o.kt)("h4",{id:"request-example-1"},"Request Example"),(0,o.kt)(s.Z,{mdxType:"Tabs"},(0,o.kt)(i.Z,{value:"py",label:"Python",default:!0,mdxType:"TabItem"},(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-py"},"# Demonstrate how another Python program can use the presigned URL to upload a file\nwith open('speechfile.wav', 'rb') as f:\n    files = {\n      'file': (response['fields']['key'], f)\n      }\n\n    http_response = requests.post(response['url'], data=response['fields'], files=files)\n\n# If successful, returns HTTP status code 204\nprint(f'File upload HTTP status code: {http_response.status_code}')\n"))),(0,o.kt)(i.Z,{value:"bash",label:"Bash",mdxType:"TabItem"},(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-js"},"curl --location --request POST 'https://api.botlhale.xyz/asr' \\\n--header 'Authorization: Bearer <IdToken>' \\\n--form 'SpeechFile=@\"mPMBv3Y3c/bot_YPBDDDGASKSEVTHT__V5v5DS992s.wav\"' \\\n--form 'LanguageCode=\"zu-ZA\"'\\\n--form 'SampleRate=\"16000\"'\n"))),(0,o.kt)(i.Z,{value:"js",label:"JavaScript",mdxType:"TabItem"},(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-js"},'var myHeaders = new Headers();\nmyHeaders.append("Authorization", "Bearer <IdToken>");\n\nvar formdata = new FormData();\nformdata.append("SpeechFile", fileInput.files[0], "[PROXY]");\nformdata.append("LanguageCode", "zu-ZA");\nformdata.append("SampleRate", "16000");\n\nvar requestOptions = {\n  method: \'POST\',\n  headers: myHeaders,\n  body: formdata,\n  redirect: \'follow\'\n};\n\nfetch("https://api.botlhale.xyz/asr", requestOptions)\n  .then(response => response.text())\n  .then(result => console.log(result))\n  .catch(error => console.log(\'error\', error));\n'))),(0,o.kt)(i.Z,{value:"nodejs",label:"Node JS - Native",mdxType:"TabItem"},(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-js"},"var https = require('follow-redirects').https;\nvar fs = require('fs');\n\nvar options = {\n  'method': 'POST',\n  'hostname': 'https://api.botlhale.xyz',\n  'path': '/asr',\n  'headers': {\n    'Authorization': 'Bearer <IdToken>'\n  },\n  'maxRedirects': 20\n};\n\nvar req = https.request(options, function (res) {\n  var chunks = [];\n\n  res.on(\"data\", function (chunk) {\n    chunks.push(chunk);\n  });\n\n  res.on(\"end\", function (chunk) {\n    var body = Buffer.concat(chunks);\n    console.log(body.toString());\n  });\n\n  res.on(\"error\", function (error) {\n    console.error(error);\n  });\n});\n\nvar postData = \"------WebKitFormBoundary7MA4YWxkTrZu0gW\\r\\nContent-Disposition: form-data; name=\\\"LanguageCode\\\"\\r\\n\\r\\nzu-ZA\\r\\n------WebKitFormBoundary7MA4YWxkTrZu0gW\\r\\nContent-Disposition: form-data; name=\\\"SpeechFile\\\"; filename=\\\"[PROXY]\\\"\\r\\nContent-Type: \\\"{Insert_File_Content_Type}\\\"\\r\\n\\r\\n\" + fs.readFileSync('VPIoG_uMJ/bot_YPBDDDGASKSEVTHT__V5v5DS992s.wav') + \"\\r\\n------WebKitFormBoundary7MA4YWxkTrZu0gW\\r\\nContent-Disposition: form-data; name=\\\"SampleRate\\\"\\r\\n\\r\\n16000\\r\\n------WebKitFormBoundary7MA4YWxkTrZu0gW--\";\n\nreq.setHeader('content-type', 'multipart/form-data; boundary=----WebKitFormBoundary7MA4YWxkTrZu0gW');\n\nreq.write(postData);\n\nreq.end();\n")))))}h.isMDXComponent=!0},6010:function(e,t,n){function a(e){var t,n,r="";if("string"==typeof e||"number"==typeof e)r+=e;else if("object"==typeof e)if(Array.isArray(e))for(t=0;t<e.length;t++)e[t]&&(n=a(e[t]))&&(r&&(r+=" "),r+=n);else for(t in e)e[t]&&(r&&(r+=" "),r+=t);return r}function r(){for(var e,t,n=0,r="";n<arguments.length;)(e=arguments[n++])&&(t=a(e))&&(r&&(r+=" "),r+=t);return r}n.d(t,{Z:function(){return r}})}}]);